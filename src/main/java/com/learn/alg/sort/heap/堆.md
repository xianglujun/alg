# 堆结构

## 使用数组实现二叉树

- 当使用数组0位置时
    - 左边的索引计算公式位:2i + 1
    - 右边的索引计算公式位: 2i + 2
    - 则父节点的索引计算公式位: (i - 1) / 2;
- 当不使用数组0位置时
    - 左子树的计算公式位：2 * i
    - 右子树的计算公式位: 2 * i + 1
    - 则父节点的索引位置计算公式位: i / 2

## 堆结构的特点

- 堆结构就是用数组实现的完全二叉树
- 完全二叉树中如果每棵子树的最大值都在顶部就是最大根堆
- 完全二叉树中如果每棵子树的最小值都在顶部就是小根堆
- 堆结构的heapInsert与heapify操作
- 堆结构的增大与减少
- 优先级队列结构，就是堆结构

## 语言提供的堆结构 vs 手写的堆结构

- 取决于，你有没有动态信息的需求
- 语言中的堆信息，在信息发生改变的时候，堆顺序不会发生变化，这个时候就可能导致出来的数据顺序不一样
- 使用语言的重排序，则需要从上到下进行数据下沉操作完成排序，成本较高
  - 改善方法为，可以增加数据映射表，用于确认节点位置
- <mark>作业：根据Comparator实现数据的比较，并在数据发生变化的时候，重排序</mark>

## 堆排序

- 先让整个数组都变成最大根堆结构，建立堆的过程
  - 先从上到下的方式，时间复杂度为O(N*logN)
  - 从下到到上的方法，时间负责度为O(N)
- 把堆的最大值和堆末尾的值交换，然后减少堆的大小之后，再去调整堆,一直周而复始，时间复杂度为O(N*logN)
- 堆的大小减少成0之后，排序完成